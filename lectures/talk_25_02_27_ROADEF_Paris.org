# -*- coding: utf-8 -*-
# -*- mode: org -*-
#+Title:  Recherche reproductible:\newline bonnes pratiques pour une science transparente
#+Author: Arnaud Legrand\medskip\newline\logoInstitutions
#+DATE:   \vspace{3cm} Congrès de la ROADEF\smallskip\newline Champs-sur-Marne, Février 2025\newline\begin{overlayarea}{1.05\linewidth}{0cm}\vspace{-3.2cm}\hfill{\mylogo}\end{overlayarea}\vspace{-1.0cm}
#+LANGUAGE: en
#+STARTUP: beamer indent inlineimages logdrawer
#+TAGS: noexport(n)

#+PROPERTY: header-args  :session :eval never-export :exports both
#+DRAWERS: latex_headers


:latex_headers:
#+LaTeX_CLASS: beamer
#+LATEX_CLASS_OPTIONS: [10pt,presentation,xcolor={usenames,dvipsnames,svgnames,table}]
# # aspectratio=169
#+OPTIONS:   H:2 num:t toc:nil \n:nil @:t ::t |:t ^:nil -:t f:t *:t <:t
#+LATEX_COMPILER: lualatex -shell-escape
#+LATEX_HEADER: \usedescriptionitemofwidthas{bl}
#+LATEX_HEADER: \usepackage[T1]{fontenc}
#+LATEX_HEADER: \usepackage[utf8]{inputenc}
#+LATEX_HEADER: \usepackage{figlatex}
#+LATEX_HEADER: \usepackage[french]{babel}
#+LATEX_HEADER: %\usepackage{DejaVuSansMono}
#+LATEX_HEADER: \usepackage{ifthen,amsmath,amstext,gensymb,amssymb}
#+LATEX_HEADER: \usepackage{relsize}
#+LATEX_HEADER: \usepackage{boxedminipage,xspace,multicol}
#+LATEX_HEADER: %%%%%%%%% Begin of Beamer Layout %%%%%%%%%%%%%
#+LATEX_HEADER: \ProcessOptionsBeamer
#+LATEX_HEADER: \usetheme[numbering=fraction,titleformat=smallcaps,progressbar=frametitle]{metropolis}
#+LATEX_HEADER: \usepackage{fontawesome}
#+LATEX_HEADER: \usecolortheme[named=BrickRed]{structure}
#+LATEX_HEADER: %%%%%%%%% End of Beamer Layout %%%%%%%%%%%%%
#+LATEX_HEADER: \usepackage{array}
#+LATEX_HEADER: \newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
#+LATEX_HEADER: \newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
#+LATEX_HEADER: \newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

#+LATEX_HEADER: %%%%%%%%% Begin of Minted Configuration %%%%%%%%%%%%%
#+LATEX_HEADER: \usepackage{minted}
#+LATEX_HEADER: \makeatletter\newcommand{\verbatimfont}[1]{\renewcommand{\verbatim@font}{\ttfamily#1}}\makeatother
#+LATEX_HEADER: \usepackage{fancyvrb}
#+LATEX_HEADER: \verbatimfont{\scriptsize}%
#+LATEX_HEADER: \let\oldendminted=\endminted
#+LATEX_HEADER: \def\endminted{\oldendminted\vspace{-1em}}
#+LATEX_HEADER: \definecolor{minted-background}{rgb}{.94,.94,.94}
#+LATEX_HEADER: \setminted{style=default}
#+LATEX_HEADER: \setminted{bgcolor=minted-background}
#+LATEX_HEADER: \setminted{frame=lines}
#+LATEX_HEADER: \setminted{linenos=true}
#+LATEX_HEADER: \renewcommand{\theFancyVerbLine}{\sffamily{\tiny\arabic{FancyVerbLine}}}

#+LATEX_HEADER: \setminted{fontsize=\scriptsize}
#+LATEX_HEADER: \usepackage{iftex}
#+LATEX_HEADER: \ifpdftex\usepackage{pmboxdraw}\else\usepackage{fontspec}\setmonofont{DejaVu Sans Mono}\fi % to enable characters like ├ and ─ 

#+LATEX_HEADER: %%%%%%%%% End of Minted Configuration %%%%%%%%%%%%%
#+LATEX_HEADER: \usepackage{xcolor}
#+LATEX_HEADER: \usepackage{color}
#+LATEX_HEADER: \usepackage{url} \urlstyle{sf}
#+LATEX_HEADER: \let\alert=\structure % to make sure the org * * works of tools
#+LATEX_HEADER: %\let\tmptableofcontents=\tableofcontents
#+LATEX_HEADER: %\def\tableofcontents{}
#+LATEX_HEADER: \let\hrefold=\href
#+LATEX_HEADER: \usepackage{ifluatex}
#+LATEX_HEADER: \ifpdftex
#+LATEX_HEADER:   \usepackage[normalem]{ulem}\usepackage{soul}
#+LATEX_HEADER:   % \usepackage{color}
#+LATEX_HEADER:   \definecolor{lightorange}{rgb}{1,.9,.7}
#+LATEX_HEADER:   \sethlcolor{lightorange}
#+LATEX_HEADER:   \definecolor{lightgreen}{rgb}{.7,.9,.7}
#+LATEX_HEADER:   \makeatother
#+LATEX_HEADER:      \renewcommand{\href}[2]{\hrefold{#1}{\SoulColor{lightorange}\hl{#2}}}
#+LATEX_HEADER:      % \renewcommand{\uline}[1]{\SoulColor{lightorange}\hl{#1}}
#+LATEX_HEADER:      % \renewcommand{\emph}[1]{\SoulColor{lightorange}\hl{#1}}
#+LATEX_HEADER:   \makeatletter
#+LATEX_HEADER:   \newcommand\SoulColor[1]{%
#+LATEX_HEADER:   \sethlcolor{#1}%
#+LATEX_HEADER:   \let\set@color\beamerorig@set@color%
#+LATEX_HEADER:   \let\reset@color\beamerorig@reset@color}
#+LATEX_HEADER: \else
#+LATEX_HEADER:    \usepackage[soul]{lua-ul}
#+LATEX_HEADER:    \usepackage{tcolorbox}
#+LATEX_HEADER:      \renewcommand{\href}[2]{\hrefold{#1}{\begin{tcolorbox}[colback=orange!30!white,size=minimal,hbox,on line]{#2}\end{tcolorbox}}}
#+LATEX_HEADER:      \let\textttold=\texttt
#+LATEX_HEADER:      \renewcommand\texttt[1]{\begin{tcolorbox}[colback=green!30!white,size=minimal,hbox,on line]{\smaller\textttold{#1}}\end{tcolorbox}}
#+LATEX_HEADER: \fi
#+LATEX_HEADER: % 
#+LATEX_HEADER: % \renewcommand\alert[1]{\SoulColor{lightgreen}\hl{#1}}
#+LATEX_HEADER: % \AtBeginSection{\begin{frame}{Outline}\tableofcontents\end{frame}}
#+LATEX_HEADER: \usepackage[export]{adjustbox}
#+LATEX_HEADER: \graphicspath{{fig/}}
#+LATEX_HEADER: \usepackage{tikzsymbols}
#+LATEX_HEADER: \def\smiley{\Smiley[1][green!80!white]}
#+LATEX_HEADER: \def\frowny{\Sadey[1][red!80!white]}
#+LATEX_HEADER: \def\winkey{\Winkey[1][yellow]}
#+LATEX_HEADER: \def\JDEVlogo{\raisebox{-1.3em}{\includegraphics[height=1cm]{./images/Logo_Grid5000.png}}}
#+LATEX_HEADER: \def\mylogo{\includegraphics[height=2.5cm]{./images/in_science_we_trust.jpg}}
#+LATEX_HEADER: \def\logoInstitutions{\includegraphics[height=.7cm]{./images/Logo-UGA2020.pdf}\quad\includegraphics[height=.7cm]{./images/Logo-CNRS.pdf}\quad\includegraphics[height=.7cm]{./images/Logo-Inria.pdf}\includegraphics[height=.7cm]{./images/Logo-Lig2.pdf}\vspace{-.7cm}}
#+LATEX_HEADER: \usepackage{tikz}
#+LATEX_HEADER: \usetikzlibrary{shapes.geometric}
#+LATEX_HEADER: \newcommand{\warningsign}{\scalebox{.6}{\tikz[baseline=-.75ex] \node[shape=regular polygon, regular polygon sides=3, inner sep=0pt, draw, thick] {\textbf{!}};}}
#+LATEX_HEADER: %\usepackage{pgf}  
#+LATEX_HEADER: %\logo{\pgfputat{\pgfxy(-2,6.5)}{\pgfbox[center,base]{\includegraphics[height=1cm]{./images/jdevLogo.pdf}}}}

#+LaTeX: \newsavebox{\temp}

#+BEGIN_EXPORT latex
  \newcommand{\myfbox}[2][gray!20]{\bgroup\scalebox{.7}{\colorbox{#1}{{\vphantom{pS}#2}}}\egroup} % \fbox
  %\def\myfbox#1{#1} % \fbox
  \def\HPC{\myfbox[gray!40]{HPC}}
  \def\NET{\myfbox[gray!40]{Network}}
  \def\SG{\myfbox[gray!40]{Smart Grids}}
  \def\ECO{\myfbox[gray!40]{Economics}}
  \def\PRIV{\myfbox[gray!40]{Privacy}}
  \def\TRACING{\myfbox[red!20]{Tracing}}
  \def\SIM{\myfbox[green!20]{Simulation}}
  \def\VIZ{\myfbox[red!40]{Visualization}}
  \def\MODELING{\myfbox[green!40]{Stochastic Models}}
  \def\OPT{\myfbox[blue!20]{Optimization}}
  \def\GT{\myfbox[blue!40]{Game Theory}}
#+END_EXPORT

#+BEGIN_EXPORT latex
\def\etal{\textit{et al.}\xspace}
\def\eg{e.g.,\xspace}
#+END_EXPORT

#+BEGIN_EXPORT latex
\def\changefont#1{%
  \setbeamertemplate{itemize/enumerate body begin}{#1}
  \setbeamertemplate{itemize/enumerate subbody begin}{#1}
  #1}
\makeatletter

\def\rv#1{\ensuremath{\textcolor{blue}{#1}}\xspace} % DarkBlue
#+END_EXPORT

#+BEGIN_EXPORT latex
\newcommand{\Norm}{\ensuremath{\mathcal{N}}\xspace}
\newcommand{\Unif}{\ensuremath{\mathcal{U}}\xspace}
\newcommand{\Triang}{\ensuremath{\mathcal{T}}\xspace}
\newcommand{\Exp}{\ensuremath{\mathcal{E}}\xspace}
\newcommand{\Bernouilli}{\ensuremath{\mathcal{B}}\xspace}
\newcommand{\Like}{\ensuremath{\mathcal{L}}\xspace}
\newcommand{\Model}{\ensuremath{\mathcal{M}}\xspace}
\newcommand{\E}{\ensuremath{\mathbb{E}}\xspace}
\def\T{\ensuremath{\theta}\xspace}
\def\Th{\ensuremath{\hat{\theta}}\xspace}
\def\Tt{\ensuremath{\tilde{\theta}}\xspace}
\def\Y{\ensuremath{y}\xspace}
\def\Yh{\ensuremath{\hat{y}}\xspace}
\def\Yt{\ensuremath{\tilde{y}}\xspace}
\let\epsilon=\varepsilon
\let\leq=\leqslant
\let\geq=\geqslant

\def\Scalebox#1{\scalebox{.9}{#1}}
\def\ScaleboxI#1{\Scalebox{\textit{#1}}}

\def\pillar#1#2{~\hbox{\hspace{-1em}\rlap{#1}\hspace{4cm}\includegraphics[height=1cm]{#2}}}
\verbatimfont{\scriptsize}
\let\oldalert=\alert
#+END_EXPORT
:end:

#+latex: \let\oldsection=\section
#+latex: \def\nosection#1{}
#+latex: \let\section=\nosection

* Outline                                                          :noexport:
- [X] Intro Neurocampus:
  - [X] What’s expected from Science? Method
  - [X] Scientific debate vs. democratic debate
  - [X] No transparency, no consensus
  - [X] Merton’s four norms of science (1940)
  - [X] Open Science and Reproducibility has become the new Norm
    - [X] Merge with "Changing Publishing Practices" (RSD ?)
- [X] Common Reproducibility Pitfalls (RSD Pleynet)
  - [X] Go read this paper, paywal
  - [X] Compare this algorithm and realize how much information is missing.
  - [X] Socio-Technical Challenges
  - [X] Different Reproducibility Concerns in Modern Science
    - [X] Pause clinical trials pour variabilité échantillon et exemple COVID
    - [X] Exemple HARKING avec Brian Wansink
    - [X] Article = partie émergé de l'iceberg, c'est juste la pub.
    - [X] Damned computers…. How computers broke science – and what we can do about it
- [X] Good Practice #1: Taking Notes and Documenting (from NeuroCampus)
  - [X] Main Challenges for a computational scientist
  - [X] Tool 1: Computational Notebooks (Litterate Programming)
    - [X] Will allow to write a reproducible document links raw data with final figures
  - [X] Tool 2: Electronic Notebooks
    - [X] Field and Laboratory notebooks
    - [X] Taking notes. Demo journal ?
    - [X] Réparer l'ouverture des liens html dans emacs.
      #+begin_src emacs-lisp :tangle init.el
      (setq browse-url-browser-function #'browse-url-chrome)
      #+end_src
- [X] Good Practice #2: Controling Software Environment
  - [X] Argh… damned computers
  - [X] Software dependencies: horror stories
  - [X] Tool 3: Containers and Package Managers
    - [X] Potential solutions: Containers and Package Managers (theory days)
- [X] Other Nightmares (à sauter)
  - [X] Gestion de données
    - [X] Nightmare 2: Fighting Information Loss with Archives
    - [X] Tool 4: Version Control and Forge
    - [X] Tool 4bis: Fighting Information Loss with Archives
  - [X] Automatisation des calculs
    - [X] Tool 1 ter: Workflows
  - [X] Chaos Numérique:
    - [X] Floating Points Rounding: the other root of all evil ?
    - [X] All I care about is the algorithm output (FP) + Floating-point arithmetic
    - [X] Did I mention we have parallel machines nowadays?
- [X] Conclusion
  - [X] Reproducible Research = Rigor and Transparency to merge with the
    next one
  - [X] Reproducibility Issues Related to the use of Computers
    - [X] Overlay MOOC RR1 et MOOC RR2
  - [X] +Global Reproducibility Networks | French Reproducibility Network  Days ?+
- [X] The Elephant in the Room: Climate Change
  - [X] Update https://ses.ens-lyon.fr/images/stats-a-la-une/stat-a-la-une-empreinte-carbone-graph1.jpg


    #+RESULTS:
    : browse-url-chrome

* Science and Society                                       :B_ignoreheading:
:PROPERTIES:
:BEAMER_env: ignoreheading
:END:
** What's expected from Science?
#+latex: \hfill\includegraphics[width=.3\linewidth]{images/notebooks/scientist_vecteezy.png}\vspace{-2mm}
# #+latex: \newline\null\hfill{\tiny Credits: Vecteezy.com}\vspace{-.8cm}
# https://www.vecteezy.com/vector-art/5607850-a-scientist-working-in-a-lab-male-character-doing-a-microscope-experiment-vector-illustration-in-flat-style

- Goal ::  
  - *Describe* and *explain* \textbf{Nature} (human organizations and artificial objects as well) \pause
  - Find *solutions* to \textbf{society} *needs and issues*
    - *Feed technological development* and *industry*: health, energy, communications, \dots
    - *Enlighten public decisions*:
      \rlap{educate citizens, politics, regulation, \dots}
\bigskip\pause      
- What else distinguishes science from other human activities? ::   \medskip\pause
  #+begin_center
  \bf Method
  #+end_center
** Scientific Consensus
# Scientific debate vs. political debate
#+latex: \includegraphics<1>[width=\linewidth]{images/false_balance_med.jpg}%
#+latex: \hbox{\hspace{-.1\linewidth}\includegraphics<2->[width=1.2\linewidth]{images/logo/open-review.png}\hspace{-.1\linewidth}}
#+latex: \uncover<3>{Enlightening the society \alert{requires moral/methodological/technical warranties}}
** Merton's four norms of science (1940)
- Universalism :: Scientific *validity* is independent of the sociopolitical status/personal attributes of its participants (origin, gender, sexuality, religion, etc.)
- Communism/communalism :: All scientists should have common ownership of scientific goods (intellectual property), to promote collective collaboration; *secrecy is the opposite of this norm*
  - \bgroup \small We say “Newton's law” to remember that Newton made the original discovery, but not because he has any property of this law\egroup
- Disinterestedness ::  Scientific institutions act for the *benefit of a \rlap{common} scientific enterprise*, rather than for the personal gain of \rlap{individuals}
- Organized skepticism :: Scientific claims should be exposed to *critical scrutiny* (including *reproduction*) before being accepted\pause
  # (methodology and institutional codes of conduct)

[[https://hal.science/hal-02480883/document][Merton]] was not saying /“you should follow these norms”/, but rather

/“this is the +behavior+ belief I am observing in the scientific \rlap{community”}/
** Transparent Research $\sim$ Open Science ?
[[https://www.ouvrirlascience.fr/][Plan National pour la Science Ouverte]]: [[https://www.science-ouverte.cnrs.fr/][CNRS]], [[https://hal.inria.fr/page/inria-soutient-la-science-ouverte][Inria]], [[https://www.inrae.fr/actualites/inrae-engage-louverture-sciences-societe][INRAE]],
#+latex: \rlap{\it Citizen Science}

\small *\bf Main pillars*:\vspace{-.8cm}
#+begin_export latex
\begin{enumerate}
\item Open access \qquad\includegraphics[height=1cm]{images/logo/open-access.png} \quad (started before 2000)
\item Open data \qquad\raisebox{-1.8em}{\includegraphics[height=1cm]{images/logo/FAIR_data_principles.jpg}} \quad \href{https://cacm.acm.org/magazines/2021/6/252840-collusion-rings-threaten-the-integrity-of-computer-science-research/fulltext}{CC-BY-SA by default at CNRS!})\vspace{-1.6em}
\item Open source \hspace{3.5cm}\raisebox{-2.0em}{\includegraphics[height=1cm]{images/logo/open-source.png}}\vspace{-1.5em}
  \begin{itemize}
  \item \emph{Open hardware}
  \end{itemize}
\item \textbf{Open methodology} (\alert{Reproducible Research})
  \begin{itemize}
  \item \emph{Open-notebook science}
  \item \emph{Open science infrastructures}
  \end{itemize}%\vspace{-.8cm}
\item \alert{Open peer review} (avoid \href{https://cacm.acm.org/magazines/2021/6/252840-collusion-rings-threaten-the-integrity-of-computer-science-research/fulltext}{collusion})
  \begin{overlayarea}{\linewidth}{0cm}
      \vspace{-2.7cm}\hbox{\hspace{.7\linewidth}%
         \includegraphics[height=2cm]{images/logo/open-review.png}}
  \end{overlayarea}\vspace{-\baselineskip}
\item Open educational resources
  \begin{overlayarea}{\linewidth}{0cm}
   \vspace{-1.4cm}\hspace{5.5cm}\includegraphics[height=.7cm]{images/logo/open-educational-resources.png}
  \end{overlayarea}\vspace{-\baselineskip}
\end{enumerate}
#+end_export

\pause\normalsize\bgroup\bf *Making code/data available for the reproduction of results* from published papers *has become the new norm* \egroup \vspace{-.4em}

\small E.g., Artifact evaluation and ACM badges\vspace{-1em}
  #+BEGIN_CENTER
  \includegraphics[height=1cm]{images/ae_badge1.png}
  \includegraphics[height=1cm]{images/ae_badge2.png}
  \includegraphics[height=1cm]{images/acm_badges.pdf}     
  #+END_CENTER
*                                                    :B_ignoreheading
:PROPERTIES:
:BEAMER_env: ignoreheading
:END:
#+latex: \let\section=\oldsection
* Common Reproducibility Pitfalls
** Go read the paper by Smith et. al. 2009
#+latex: \begin{center}
#+latex: \includegraphics<1>[width=1\linewidth]{images/article_access_1.png}%
#+latex: \includegraphics<2>[width=1\linewidth]{images/article_access_2.png}%
#+latex: \includegraphics<3>[width=1\linewidth]{images/article_access_3.png}%
#+latex: \includegraphics<4->[width=1\linewidth]{images/article_access_4.png}%
#+latex: \end{center}
\pause
- Use your institution subscription\dots or Sci-Hub $\winkey$, \pause or HAL/Arxiv
** Just compare to the Algorithm they proposed
[[https://arxiv.org/pdf/1507.00980.pdf][Rodriguez et al., CONCUR'15]]

#+latex: \begin{center}
#+latex: \includegraphics<1>[width=.8\linewidth]{images/article_rodriguez_1.png}%
#+latex: \includegraphics<2>[width=.8\linewidth]{images/article_rodriguez_2.png}%
#+latex: \includegraphics<3>[width=.8\linewidth]{images/article_rodriguez_5.png}%
#+latex: \includegraphics<4>[width=.8\linewidth]{images/article_rodriguez_3.png}%
#+latex: \includegraphics<5>[width=.8\linewidth]{images/article_rodriguez_4.png}%
#+latex: \end{center}
\pause
- Looks good!\pause  Err... *not so simple*. Depending on how you do this, you quickly move
  from polynomial to exponential.\pause

- *Experiments*!\pause  \warningsign   Possible /404, code not found!/ ahead!!!\pause
- Wait, what's this language? Did this ever run one day?\pause
- Wow, I'll need =CPLEX= and =Gurobi= but all I have is =lpsolve= or =glpk=\pause
- Sweet, they provided a *binary*! Oh, wait, MacOSX in 2015 ?!?\pause
- The GitHub webpage says it requires Foo, Bar, and Baz, but none of
  the *versions* I find appear to work.\pause
- With which *parameters* and data set do you run this code? And Why?

In the end, *one new thesis* to reproduce/understand this paper\dots and finally contribute.
* Different kinds of reproducibility
** Socio-technical Challenges
#+BEGIN_EXPORT latex
\vspace{-.3cm}
\null\hspace{-.2cm}\hbox{
\begin{columns}
  \begin{column}{.4\linewidth}
    \begin{overlayarea}{\linewidth}{8cm}
      \includegraphics[scale=.2]{images/reproducibility-graphic-online2.jpg}\\
      \includegraphics[scale=.2]{images/reproducibility-graphic-online3.jpg}
      % \includegraphics<3>[scale=.25]{images/reproducibility-graphic-online4.jpg}%
      % \includegraphics<4>[scale=.25]{images/reproducibility-graphic-online5.jpg}
    \end{overlayarea}
  \end{column}\hspace{-.2cm}%
  \begin{column}{.66\linewidth}\begin{overlayarea}{\linewidth}{8cm}\vspace{-.7em}
#+END_EXPORT
\small
[[http://www.nature.com/news/1-500-scientists-lift-the-lid-on-reproducibility-1.19970][1,500 scientists lift the lid on reproducibility]], Nature, May 2016\pause

\normalsize *\bf Social causes* \small
- \footnotesize Fraud, conflict of interest (pharmaceutic, \dots)
- \footnotesize  *No incentive* to reproduce/check our own work (afap), nor the
  work of others (big results!), nor to allow others to check
  (competition)
- \footnotesize  Peer review *does not scale*: 1M+ articles per year!\pause

- _*Emerging practices*_: DORA/Plan S/COARA, DMP and FAIR data, artefact
  evaluation, reproducibility badges, reproducibility challenges, open
  reviews, \dots\pause

\normalsize *\bf Methodological/technical causes*
- \footnotesize The many biases (apophenia, confirmation, hindsight,
  experimenter, ...): *bad designs*
- \footnotesize Selective reporting, weak analysis (*statistics*, *data manipulation
  mistakes*, *computational errors*)
- \footnotesize  *Lack of information, code/raw data unavailable*

#+BEGIN_EXPORT latex
    \end{overlayarea}
  \end{column}
\end{columns}}
#+END_EXPORT
** Different Reproducibility Concerns in Modern Science
# _Distinguish between:_
# #+LaTeX: \begin{columns}\begin{column}[b]{.4\linewidth}
# - experimental science
# - observational science
# #+LaTeX: \end{column}\begin{column}[b]{.6\linewidth}
# - computational science (simulation)
# - (big) data analysis
# #+LaTeX: \end{column}\end{columns}%\bigskip
\small
- Biology, Oncology :: sample provenance, clinical trials 
  #+latex: \hbox{\hfill$\leadsto$ standardized protocols\hspace{-1cm}}\pause
- Psychology, Nutrition :: HARKING, p-hacking \hfill$\leadsto$ pre-registration
  
  #+latex: \only<2>{
  - [[https://en.wikipedia.org/wiki/Brian_Wansink][Brian Wansink]] :: Professor, Psychological Nutrition, Cornell, 2016
    # https://blogs.sciencemag.org/pipeline/archives/2018/02/26/gotta-be-a-conclusion-in-here-somewhere
    # - /Mindless Eating/, /Obesity/, /Attractive names sustain increased vegetable intake in schools/
    #+BEGIN_QUOTE
    \footnotesize 
    I gave her a data set of a self-funded, failed study
    which had null results. I said "This cost us a lot of time and our
    own money to collect. *There's got to be something here we can
    salvage because it's a cool (rich & unique) data set*." I told her
    what the analyses should be.
    [..] Every day she came back with puzzling new results, and *every
    day we would scratch our heads*, ask "Why," *and come up with another
    way to reanalyze the data* with yet another set of plausible
    hypotheses\hfill _*17 retracted publications*_
    #+END_QUOTE
  #+latex: }\pause
- Genomics :: software engineering, computational reproducibility,
  provenance
- Computational fluid dynamics :: numerical chaos, parallel architectures\pause
- /Artificial Intelligence/ :: most of the above $\winkey$ \medskip

\vspace{-1em}
/The processing steps between raw observations and findings have gotten
increasingly numerous and complex/
#+BEGIN_EXPORT latex
\vspace{.5em}
\begin{columns}
   \begin{column}{.75\linewidth}
%  \includegraphics<-+>[width=1.0\linewidth]{images/iceberg_publication-1.png}%
%  \includegraphics<+>[width=1.0\linewidth]{images/iceberg_publication-2.png}%
  \includegraphics<-+>[width=1.0\linewidth]{images/iceberg_publication-3.png}%
%  \includegraphics<+>[width=1.0\linewidth]{images/iceberg_publication-4.png}%
  \includegraphics<+->[width=1.0\linewidth]{images/iceberg_publication-5.png}\smallskip
  \end{column}
  \begin{column}{.25\linewidth}
    \uncover<.>{%
    #+end_export
[[https://theconversation.com/how-computers-broke-science-and-what-we-can-do-to-fix-it-49938][How computers]]
[[https://theconversation.com/how-computers-broke-science-and-what-we-can-do-to-fix-it-49938][broke science --]] 
[[https://theconversation.com/how-computers-broke-science-and-what-we-can-do-to-fix-it-49938][and what we can]]
[[https://theconversation.com/how-computers-broke-science-and-what-we-can-do-to-fix-it-49938][do about it]]
-- Ben Marwick,

\hbox{The conversation, 2015}
    #+begin_export latex
    }
  \end{column}
\end{columns}\smallskip
  
  \uncover<.>{\hbox{\normalsize\bf Reproducible Research = Bridging the Gap by working Transparently}}
#+END_EXPORT

* Good Practice #1:\newline Taking Notes and Documenting @@latex:\newline\includegraphics[width=\linewidth]{images/phd010708.png}@@
** Main Challenges for a computational scientist
\small
#+begin_src shell :results output :exports both
my_code --cfg=magical_param:0.94572 '*.dat' --output foo.csv
#+end_src

#+ATTR_BEAMER: :overlay <+->
- Tracking code _version_ ::  
  - <.-> =my_code= is revision =21b95ecfa0911d6ca87668482b11ab9498edd8f3=
- Tracking software _environment_ ::  
  #+ATTR_BEAMER: :overlay <.->
  - =my_code= depends on a dozen of libraries, which
    depend on dozens of libraries
  - =my_code= was compiled with =clang= =1:9.0-49.1= and =-O3
    -funroll-loops -fno-strict-aliasing -finline-functions ...=
- Tracking _parameters_ and _data_  ::  
  #+ATTR_BEAMER: :overlay <.->
  - =*.dat=? Ooh, you ran this in ~data/2091293-AJXQ37~?
  - Wasn't =mymap.dat= updated since then?
  - That was for =foo.csv=. What about =bar.csv=? Is it reproducible?
- _Tracking the process_ :: (on short/long term)
  - <.-> Why did I run this? What did I learn from it? I remember doing
    this but when?
- Handle complex sequences and reuse results :: (leverage supercomputers)

** Tool 1: Computational Notebooks (Litterate Programming)
#+LaTeX: \includegraphics<+>[width=\linewidth]{images/example_pi_full-1.pdf}%
#+LaTeX: \includegraphics<+>[width=\linewidth]{images/example_pi_full-2.pdf}%
#+LaTeX: \includegraphics<+>[width=\linewidth]{images/example_pi_full-3.pdf}%
#+LaTeX: \includegraphics<+>[width=\linewidth]{images/example_pi_full-4.pdf}%
#+LaTeX: \includegraphics<+>[width=\linewidth]{images/example_pi_full-5.pdf}%
#+LaTeX: \includegraphics<+->[width=\linewidth]{images/example_pi_full-6.pdf}%

#+BEGIN_EXPORT latex
\begin{overlayarea}{\linewidth}{0cm}
%  \vspace{-1.8cm}
  \vspace{-1.3cm}
%  \begin{center}
    \raisebox{-.6em}{\includegraphics<+>[height=.8cm]{images/logo/Jupyter_logo.png}
    \includegraphics<.>[height=.8cm]{images/logo/OrgMode_logo.png}
    \includegraphics<.>[height=.8cm]{images/logo/RStudio_logo.png}}
 %    \only<.>{\href{https://jupyterhub.u-ga.fr/}{https://jupyterhub.u-ga.fr/}}
    \uncover<.>{allow to write a reproducible document \\
    \hspace{4cm}that links raw data with final figures}
%  \end{center}
\end{overlayarea}
#+END_EXPORT

*** Export svg pdf                                               :noexport:
#+begin_src shell :results output :exports both
for i in images/example_pi_*.svg ; do
   inkscape $i --export-pdf=`dirname $i`/`basename $i .svg`.pdf;
done
#+end_src

#+RESULTS:
** Tool 2: Electronic Notebooks                          :B_frame:
    :PROPERTIES:
    :BEAMER_env: frame
    :BEAMER_OPT: plain
    :END:

#+BEGIN_EXPORT latex
\begin{overlayarea}{\linewidth}{0cm}
\vspace{-4.7cm}
\hbox{\hspace{-.1\linewidth}\includegraphics[width=1.2\linewidth,height=9cm]{images/remember_kids.jpg}}
\end{overlayarea}
#+END_EXPORT

** Field and Laboratory notebooks
\vspace{3mm}
*** Social Sciences, Ecology, Biology                      :B_column:BMCOL:
:PROPERTIES:
:BEAMER_env: column
:BEAMER_col: .5
:END:
*Social Sciences, Ecology, Biology*

#+latex: \begin{overlayarea}{\linewidth}{7.2cm}
#+ATTR_LaTeX: :height 3cm
file:images/notebooks/field_pic1.jpg

\centering
#+begin_export latex
\only<1>{
  \includegraphics[height=3cm]{images/notebooks/field_notebook_Gibbs.jpg}\\
  \footnotesize Robert Henry Gibbs, Jr.,\\ ichthyologist (1929 -- 1988)}
\only<2>{
  \includegraphics[height=3cm]{images/notebooks/field_notebook_recent.jpg}\\
  \footnotesize Marie-Claude Quidoz, Centre d'Ecologie Fonctionnelle et Evolutive}
#+end_export
#+latex: \end{overlayarea}
*** Chemistry, Physics, Biology                            :B_column:BMCOL:
:PROPERTIES:
:BEAMER_env: column
:BEAMER_col: .5
:END:
*Chemistry, Physics, Biology*

#+latex: \begin{overlayarea}{\linewidth}{7.2cm}

#+ATTR_LaTeX: :height 3cm
file:images/notebooks/lab_pic.jpg

\centering
#+begin_export latex
\only<1>{
  \includegraphics[height=3cm]{images/notebooks/lab_note_old.jpg}\\
  \footnotesize Emil Heinrich du Bois-Reymond, electrophysiology (1818 -- 1896)}
\only<2>{
  \includegraphics[height=3cm]{images/notebooks/lab_note_recent.jpg}\\
  \footnotesize \href{http://dx.doi.org/10.12688/f1000research.7628.1}{Contemporary laboratory notebook}
   \href{http://dx.doi.org/10.12688/f1000research.7628.1}{in Neurology}}
#+end_export
#+latex: \end{overlayarea}
*** Evolution                                             :B_ignoreheading:
:PROPERTIES:
:BEAMER_env: ignoreheading
:END:
\pause\centering
*Essentially no evolution throughout the last century*

** Taking notes
# https://everlaab.com/methode-zettelkasten-comment-prendre-des-notes-utiles/

- Org-mode and Markdown :: two simple text formats
  - simple formatting and export to more elaborate formats
  - Hyperlinks, images, code, etc.
- Journal structure ::  
  - My journal/notebook (single org file)
  - Tom Cornebize's journal (single org file + Jupyter notebooks)
#+BEGIN_EXPORT latex
\begin{overlayarea}{\linewidth}{0cm}
\vspace{-.7cm}
\hbox{\hspace{.65\linewidth}\includegraphics[width=.45\linewidth]{images/notebooks/org-roam-server.png}}
%https://github.com/org-roam/org-roam-server
\end{overlayarea}\vspace{-\baselineskip}
#+END_EXPORT
- Zettelkasten possible structure ::  
  - Org-roam, Zettler, Roam, Obsidian, ...
  - Architects, librarians, *gardeners*

\vspace{\baselineskip}\bigskip\pause
\textbf{My recommendations}: Do _not_ use a fancy cloud-based proprietary \rlap{tool}
- Simple open source *text-based* format
- *Control versions* and backup yourself (e.g., using gitlab, github)
- *Single location* if possible
- *Annotate* (tags in a journal, links in a Zettelkasten)
* Good Practice #2\newline \hbox{Controling Software Environment}
** Nightmare 1: Fighting Software Environments Nightmare
What is hiding behind a simple
#+begin_src python :results output :exports both
import matplotlib
#+end_src

#+LaTeX: \scriptsize
#+BEGIN_EXAMPLE
Package: python3-matplotlib
Version: 2.1.1-2
Depends: python3-dateutil, python-matplotlib-data (>= 2.1.1-2),
python3-pyparsing (>= 1.5.6), python3-six (>= 1.10), python3-tz,
libjs-jquery, libjs-jquery-ui, python3-numpy (>= 1:1.13.1),
python3-numpy-abi9, python3 (<< 3.7), python3 (>= 3.6~),
python3-cycler (>= 0.10.0), python3:any (>= 3.3.2-2~), libc6 (>=
2.14), libfreetype6 (>= 2.2.1), libgcc1 (>= 1:3.0), libpng16-16 (>=
1.6.2-1), libstdc++6 (>= 5.2), zlib1g (>= 1:1.1.4)
#+END_EXAMPLE
#+BEGIN_EXPORT latex
\begin{overlayarea}{\linewidth}{5cm}
  \pause\vspace{-3cm}\includegraphics<+>[width=\linewidth]{images/python3-matplotlib.png}%
\end{overlayarea}
#+END_EXPORT

** Nightmare 1: Fighting Software Environments Nightmare
Python and its rapidly evolving environment
#+LaTeX: \null\vspace{-.8em}

#+begin_src shell :results output :exports both
python2 -c "print(10/3)"
python3 -c "print(10/3)"
#+end_src

#+LaTeX: \null\vspace{-1.2em}{\scriptsize
#+RESULTS:
: 3
: 3.3333333333333335
#+LaTeX: }
\pause
#+LaTeX: \null\vspace{-1.5cm}
#+ATTR_LATEX: :height 3cm :center nil
file:images/plot_1.5.3.png
#+ATTR_LATEX: :height 3cm :center nil
file:images/plot_2.1.1.png

\pause 
Cortical Thickness Measurements (PLOS ONE, June 2012) in /FreeSurfer/
#+begin_quote
  About a \textbf{factor two smaller differences} were found *between* the
  *Mac* and *HP workstations* and *between Mac OSX 10.5 and OSX 10.6*.
#+end_quote
** Argh... damned computers                                       :noexport:
- \textbf{Alice}: I got 3.123123 \hspace{2cm} \textbf{Bob}: I got segfault
- Damned! It used to work!!! Whenever I upgrade my computer, things
  break so I try to stay away from this $\frowny$ \medskip
# - Anyway, I don’t have the root password \hfill The what?...\medskip
- Whenever trying the code of my colleague, I had to install
  =libFoo-1.5c= and =pip install blah= but
  I broke everything and now neither his code nor mine works! $\frowny$ \medskip
- But hey! Here is my code. It's on GitHub so feel free to play with it! I’m doing open
  science \winkey
  1. No one will ever run/use your code if it isn't *easy to install*
  2. No one will ever manage to run your code if you don't *document
     how to run it*
  3. Others (even you) are unlikely to get the same results unless you
     *control and share your software environment*

** Software dependencies: horror stories                          :noexport:
****                                                     :B_ignoreheading:
:PROPERTIES:
:BEAMER_env: ignoreheading
:END:
#+latex: \small\only<+->{}
#+ATTR_BEAMER: :overlay <+->
- Software environment evolution
  # \hfill /Default choices silently evolving/\hspace{1cm}
- OS heterogeneity
  # \hfill /Bug fix? Reimplementing FFT and BLAS?/\hspace{1cm}
- Impact of the compiler
****                                                     :B_ignoreheading:
:PROPERTIES:
:BEAMER_env: ignoreheading
:END:
#+begin_export latex
   \begin{overlayarea}{\linewidth}{2cm}\vspace{2cm}
      \only<3>{\vspace{-3.2cm}\null\hspace*{5.5cm}\null\includegraphics<3>[width=.52\linewidth]{images/pone_0038234_g005.jpg}}%
      \only<4->{\vspace{-3.8cm}\null\hspace*{6.8cm}\null\includegraphics<4-5>[width=.45\linewidth]{images/rescueHPC_gal1.png}%
      \includegraphics<6-7>[width=.45\linewidth]{images/rescueHPC_gal2.png}}%    
   \end{overlayarea}
#+end_export

****                                                     :B_ignoreheading:
:PROPERTIES:
:BEAMER_env: ignoreheading
:END:

#+LaTeX: \vspace{.2cm}
#+LaTeX: \begin{overlayarea}{\linewidth}{5cm}\scriptsize
  #+LaTeX: \only<2>{\vspace{-2cm}

    #+ATTR_LATEX: :height 3.35cm :center nil
    file:images/plot_1.5.3.png
    #+ATTR_LATEX: :height 3.35cm :center nil
    file:images/plot_2.1.1.png
  #+LaTeX: }%
  #+LaTeX: \only<3>{
    The Effects of FreeSurfer Version, Workstation Type, and Macintosh
    Operating System Version on Anatomical Volume and Cortical Thickness
    Measurements (PLOS ONE, 2012)
  
    #+BEGIN_QUOTE
    Significant differences in volume and cortical thickness were
    revealed *across FreeSurfer versions*:
    - volume: \hspace{1.13cm} 8.8 \pm 6.6% (range 1.3-\oldalert{64.0}%)
    - cortical thickness: 2.8 \pm 1.3% (range 1.1-7.7%) 
    About a factor two smaller differences were found *between* the
    *Mac* and *HP workstations* and *between Mac OSX 10.5 and OSX 10.6*.

    In the context of an ongoing study, _users are discouraged to
    update to a new major release_ of either FreeSurfer or operating
    system.

    Formal assessment of the accuracy of FreeSurfer is desirable.
    #+END_QUOTE
  #+LaTeX: }%
  #+LaTeX: \only<4->{
    Assessing Reproducibility: An Astrophysical Example of
    Computational Uncertainty in the HPC Context (ResCuE-HPC, 2018)

      #+LaTeX: \null\hbox{\hspace{-.4cm}\scalebox{.87}{
      #+ATTR_LATEX: :center nil
      | Compiler     | Optim. | Largest Halo |           | Walltime  |
      |              |        | Avg Mass.    | Std. Err  |           |
      |--------------+--------+--------------+-----------+-----------|
      | gcc@6.2.0    | None   |  2.273E 46   | 1.069E 44 | 22h\pause |
      | gcc@6.2.0    | Normal |  2.266E 46   | 1.218E 44 | 10h       |
      | gcc@6.2.0    | High   |  2.275E 46   | 1.199E 44 | \oldalert<5>9h\pause   |
      |--------------+--------+--------------+-----------+-----------|
      | intel@16.0.3 | None   | \oldalert{22.71} E 46  | 1.587E 44 | 39h       |
      | intel@16.0.3 | Normal | \oldalert{43.30} E 46  | 1.248E 44 | 7h        |
      | intel@16.0.3 | High   |  2.268E 46   | 1.414E 44 | 6h        |
      |--------------+--------+--------------+-----------+-----------|
      | cce@8.5.5    | Low    | \oldalert{43.11} E 46  | 1.353E 44 | 16h       |
      | cce@8.5.5    | Normal |  2.271E 46   | 1.261E 44 | 6h        |
      | cce@8.5.5    | High   |  2.272E 46   | 1.341E 44 | 5h        |
      # |--------------+--------+--------------+----------+----------|
      # | pgi@16.9.0   | Normal |     2.272E46 | 1.326E44 | 13h      |
      # | pgi@16.9.0   | High   |     2.271E46 | 1.191E44 | 10h      |
      #+LaTeX: }}
    #+LaTeX: }
#+LaTeX: \end{overlayarea}

** Complex ecosystems                                             :noexport:

#+begin_src python :results output :exports both
import matplotlib
print(matplotlib.__version__) 
#+end_src

\vspace{-.8\baselineskip}
#+RESULTS:
: 3.5.1

\vspace{-.8\baselineskip}\pause
#+name: python3_apt
#+begin_src shell :results output :exports both
apt show python3-matplotlib
#+end_src

\vspace{-.8\baselineskip}
#+RESULTS: python3_apt
#+begin_example
Package: python3-matplotlib
Version: 3.5.1-2+b1
Source: matplotlib (3.5.1-2)
Maintainer: Sandro Tosi <morph@debian.org>
Installed-Size: 27.6 MB
Depends: libjs-jquery, libjs-jquery-ui, python-matplotlib-data (>= 3.5.1), 
         python3-dateutil, python3-pil.imagetk, python3-pyparsing (>= 1.5.6), 
         python3-six (>= 1.4), python3-numpy (>= 1:1.20.0), python3-numpy-abi9, 
         python3 (<< 3.11), python3 (>= 3.9~), python3-cycler (>= 0.10.0), 
         python3-fonttools, python3-kiwisolver, python3-packaging, python3-pil, 
         python3:any, libc6 (>= 2.29), libfreetype6 (>= 2.2.1), 
         libgcc-s1 (>= 3.3.1), libqhull-r8.0 (>= 2020.1), libstdc++6 (>= 11)
Recommends: python3-tk
Suggests: dvipng, ffmpeg, fonts-staypuft, ghostscript, gir1.2-gtk-3.0, inkscape, 
          ipython3, librsvg2-common, python-matplotlib-doc, python3-cairocffi, 
          python3-gi, python3-gi-cairo, python3-gobject, python3-pyqt5, 
          python3-scipy, python3-sip, python3-tornado, texlive-extra-utils, 
          texlive-latex-extra
Enhances: ipython3
Homepage: http://matplotlib.org/
Download-Size: 7,333 kB
APT-Manual-Installed: no
APT-Sources: http://ftp.fr.debian.org/debian unstable/main amd64 Packages
Description: Python based plotting system in a style similar to Matlab (Python 3)
 Matplotlib is a pure Python plotting library designed to bring
 publication quality plotting to Python with a syntax familiar to
 Matlab users. All of the plotting commands in the pylab interface can
 be accessed either via a functional interface familiar to Matlab
 users or an object oriented interface familiar to Python users.
 .
 This package contains the Python 3 version of matplotlib.

#+end_example

#+BEGIN_EXPORT latex
\begin{overlayarea}{\linewidth}{5cm}
  \pause\vspace{-11.5cm}\hbox{\hspace{-1cm}\includegraphics<+>[width=1.25\linewidth]{images/python3-matplotlib.png}}%
\end{overlayarea}
#+END_EXPORT
** Tool 3: Containers and Package Managers
#+ATTR_LATEX: :align @{}C{2.0cm}C{2.3cm}C{7cm}@{}
| The good                                                                                                      | The bad                                                                                                                        | The uggly                                               |
| \includegraphics[height=1cm]{images/logo/Guix_logo.png}\includegraphics[height=1cm]{images/logo/nix_logo.png} | \includegraphics[height=1cm]{images/logo/docker_logo.png}\includegraphics[height=1cm]{images/logo/singularity_logo.png}\qquad  | \includegraphics[height=.7cm]{images/logo/reprozip.png}\includegraphics[height=.7cm]{images/logo/conda.png} |
*** Automatic tracking\pause
*** Containers
- *Pros*: \quad Lightweight, \quad Good isolation, \quad Easy to use
   #+latex: \only<2>{
  - Running as easy as =docker run <img> <cmd>=
  - Building images: =docker build -f <Dockerfile>=
  - Sharing through the [[https://hub.docker.com/][Docker Hub]]: =docker pull/push <img>=
  #+latex: }\pause
- *Cons*: \quad Opaque, \quad Container build is generally not reproducible
  #+latex: \begin{block}{}<3>\vspace{-1.1cm}
  #+latex: \hspace{.8cm}\begin{overlayarea}{.8\linewidth}{4cm}
  - Recipes rarely follow /reproducibility good practices/\vspace{-.2cm}
    #+begin_src shell :results output :exports both
    FROM ubuntu:20.04
    RUN apt-get update
         && apt-get upgrade -y
         && apt-get install -y ...
    #+end_src
    #+latex: \vspace{.2cm}
    + Choose a *stable* image (and the smallest possible)
    + Include only the necessary libraries (e.g. no graphics libs)
    + Avoid system updates (instead freeze sources)
  #+latex: \end{overlayarea}
  #+latex: \end{block}
  \pause
#+latex: \vspace{-4cm}  
*** Package managers \quad (the uggly and the good)
- Language specific:
  #+latex: \hbox{
    =pip/pipenv/virtualenv=, =conda,= =CRAN/Bioconductor=
  #+latex: \hspace{-3cm}}
  - *Limits*:
    #+latex: \hbox{version management, durability, permeable, language centric\hspace{-1cm}}
- *GUIX/NiX* = Full-fledged functional package manager
  - Native support for environment (/à la git/)
  - Isolation through =--pure=
  - Recompile from source (cache recommended)
    
# #+LaTeX: \begin{center}
# #+LaTeX: \includegraphics[height=1cm]{images/logo/Guix_logo.png}
# #+LaTeX: \includegraphics[height=1cm]{images/logo/nix_logo.png}
# #+LaTeX: \includegraphics[height=1cm]{images/logo/docker_logo.png}
# #+LaTeX: \includegraphics[height=1cm]{images/logo/singularity_logo.png}\qquad
# #+LaTeX: \includegraphics[height=.8cm]{images/logo/reprozip.png} \qquad
# #+LaTeX: \end{center}
* Other Computer Related Nightmares 
** Nightmare 2: Fighting Information Loss with Archives
\small
D. Spinellis. /[[https://www.spinellis.gr/sw/url-decay/][The Decay and Failures of URL
References]]/. CACM, 46(1), Jan 2003.\smallskip

#+BEGIN_QUOTE
  The half-life of a referenced URL is approximately 4 years from its
  publication date.
#+END_QUOTE
\vspace{-1em}
P. Habibzadeh. /[[https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3885908/][Decay of References to Web sites in Articles Published
in]]/ /[[https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3885908/][General Medical Journals: Mainstream vs Small Journals]]/. Applied
Clinical Informatics. 4 (4), 2013
#+BEGIN_QUOTE
   half life ranged from 2.2 years in EMHJ to 5.3 years in BMJ
#+END_QUOTE
\vspace{-2em}
\normalsize\pause
- Article archives :: 
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/ArXiv-web.png}}
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/LogoHAL.png}}

- Data archives ::
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/Figshare-logo.png}}
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/Zenodo-logo.jpg}}

- Software Archive ::
  #+LaTeX: \raisebox{-2.4ex}{\includegraphics[height=1cm]{images/logo/swh-logo.png}}

#+LaTeX: \raisebox{-1ex}{\includegraphics[height=.8cm]{images/logo/git_logo.png}}
#+LaTeX: \raisebox{-.5ex}{\includegraphics[height=.8cm]{images/logo/github_logo.png}} or
#+LaTeX: \raisebox{-1.4ex}{\includegraphics[height=.8cm]{images/logo/gitlab_logo.png}}
$=$ awesome but:
- Inadequate for \textbf{large} data \hspace{1cm}\structure{\boldmath$\cdot$} $\ne$ Archive

** Tool 4: Version Control and Forge                              :noexport:
\small
*** Git = version control
\vspace{-.2cm}
****                                                               :BMCOL:
:PROPERTIES:
:BEAMER_col: .5
:END:
- Developed in 2005 by Linus Torvalds for the kernel development
- Local and efficient rollbacks
- Distributed: everyone has a full copy of the history
****                                                               :BMCOL:
:PROPERTIES:
:BEAMER_col: .5
:END:
\vspace{-.3cm}
#+latex:  \includegraphics[height=3.8cm]{images/mooc/git_tree.png}%
*** GitHub, GitLab, and Co
- Free hosting of public projects, social network
# - Web interfaces (browsing, preview, online editing)
# - User management (read/write, public/private)
# - Issues, Continuous Integration, ...

#+begin_export latex
  \hbox{\includegraphics[height=1.3cm]{images/mooc/github_interactions.pdf}%
        \includegraphics[height=1.4cm]{images/mooc/gitlab_interactions.pdf}}
#+end_export
*** Limitation
- Managing large data: \quad  +Git LFS+ \quad =Git Annex= (or [[https://www.datalad.org][DataLad]])
** Tool 5: Fighting Information Loss with Archives                :noexport:
\small

#+LaTeX: \hfill \raisebox{-1ex}{\includegraphics[height=.8cm]{images/logo/git_logo.png}}
#+LaTeX: \raisebox{-.5ex}{\includegraphics[height=.8cm]{images/logo/github_logo.png}} or
#+LaTeX: \raisebox{-1.4ex}{\includegraphics[height=.8cm]{images/logo/gitlab_logo.png}}
$=$ awesome collaborations ($\ne$ archive)\hfill\null

- D. Spinellis. /[[https://www.spinellis.gr/sw/url-decay/][The Decay and Failures of URL References]]/. CACM, 46(1),
  2003
    
  #+BEGIN_QUOTE
    The half-life of a referenced URL is approximately 4 years from its
    publication date.
  #+END_QUOTE
- P. Habibzadeh. /[[https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3885908/][Decay of References to Web sites in Articles
 Published in]]/ /[[https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3885908/][General Medical Journals: Mainstream vs Small
 Journals]]/. Applied Clinical Informatics. 4 (4), 2013
 #+BEGIN_QUOTE
    half life ranged from 2.2 years in EMHJ to 5.3 years in BMJ
 #+END_QUOTE
- Discontinuated forges: Code Space, Gitorious, Google code, Inria Gforge
\normalsize\pause
- Article archives :: 
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/ArXiv-web.png}}
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/LogoHAL.png}}
  #+LaTeX: \hfill\raisebox{-3em}{\includegraphics[height=1.8cm]{images/logo/Internet-archive.png}}\vspace{-2em}
- Data archives ::
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/Figshare-logo.png}}
  #+LaTeX: \raisebox{-1.5ex}{\includegraphics[height=.8cm]{images/logo/Zenodo-logo.jpg}}

- Software Archive ::
  #+LaTeX: \raisebox{-2.4ex}{\includegraphics[height=1cm]{images/logo/swh-logo.png}} 
  Collect/Preserve/Share
** Tool 5: Automating computations with workflows
#+latex: \only<1-4>{
Notebooks are no panacea and do not help developing clean code
#+latex: }

#+LaTeX: \includegraphics<+>[height=6cm]{images/mooc/nb1.png}%
#+LaTeX: \includegraphics<+>[height=6cm]{images/mooc/nb2.png}%
#+LaTeX: \includegraphics<+>[height=6cm]{images/mooc/nb3.png}%
#+LaTeX: \includegraphics<+>[height=6cm]{images/mooc/nb4.png}%
#+LaTeX: \vspace{.8cm}\only<+>{\begin{overlayarea}{1.5\linewidth}{8cm}
  #+ATTR_LATEX: :height 7cm :center nil
  file:images/mooc/SbmlParameterisation.png
  #+ATTR_LATEX: :height 7cm :center nil
  file:images/mooc/SbmlModelling.png
#+LaTeX: \end{overlayarea}}\vspace{2cm}\only<+>{\vspace{-3cm}}

*Workflows*:
- Clearer high-level view
- *Explicit* composition of codes and data movement
- Safer sharing, reusing, and execution
- Notebooks are a variant that is both impoverished and richer
  - No simple/mature path from a notebook to a workflow

*Examples*:
- Galaxy, Kepler, Taverna, Pegasus, Collective Knowledge, VisTrails
- Light-weight: =make=, dask, drake, swift, =snakemake=, ...
- Hybrids: SOS-notebook, ...

** Floating Points Rounding: the other root of all evil ?
#+LaTeX: \def\round{\texttt{round}}
\small
- Every operation includes implicit rounding.
  #+begin_src python :results output :exports both
  print(2.1-2.0 == 0.1)
  #+end_src

  \vspace{.5em}
  
  #+RESULTS:
  : False

  \pause
  # Fortunately: \round(a)+\round(b)=\round(a+b)=\round(a+b)\newline\pause
- *Unfortunately*: \round(\round(a+b)+c) $\ne$ \round(a+\round(b+c))\newline
  Hence, _operation order matters_. *For a reproducible
  computation, operation order should be preserved!!!*   Which order is more relevant is an other debate  $\winkey$ \pause
- Numerical *instability* may be closer than you think [Rump, 1988]
  $$f(x, y) = 333.75y^6 + x^2(11 x^2 y^2 - y^6 − 121 y^4 − 2)2 + 5.5y^8 + \frac{x}{2y}$$

  #+latex: \centerline{Evaluation of $f(77617.0, 33096.0)$\newline\scalebox{.7}{
  |------------------------------------------+----------------------------------|
  | Single precision                         | \alert{1.172603}                 |
  |------------------------------------------+----------------------------------|
  | Double precision                         | \alert{1.172603}9400531          |
  |------------------------------------------+----------------------------------|
  | Extended precision                       | \alert{1.172603}940053178        |
  |------------------------------------------+----------------------------------|
  | MPFI                                     | [\alert{-0.8273960}59946821368141165..., |
  | (multiple precision interval arithmetic) | \alert{-0.8273960}59946821368141165...] |
  |------------------------------------------+----------------------------------|
  #+latex: }}
  #+latex: \begin{flushright}\scriptsize \href{https://www.teratec.fr/actu/calcul/Workshop_HPC_CFD_EDF_DENIS.pdf}{Courtesy of Christophe Denis}\end{flushright}
At scale (complex code + non-determinism), all this can become particularly
harmful and painful.
** All I care about is the algorithm output (FP)
#+ATTR_LATEX: :width .8\linewidth
file:images/polynome1.pdf
#+begin_src python :results output :exports both
def polynome(x):
    return x**9 - 9.*x**8 + 36.*x**7 - 84.*x**6 + 126.*x**5 \
           - 126.*x**4 + 84.*x**3 - 36.*x**2 + 9.*x - 1.
#+end_src
** Floating-point arithmetic
#+ATTR_LATEX: :width .8\linewidth
file:images/polynome2.pdf
#+begin_src python :results output :exports both
def horner(x):
    return x*(x*(x*(x*(x*(x*(x*(x*(x - 9.) + 36.) - 84.) + 126.) \
           - 126.) + 84.) - 36.) + 9.) - 1.
#+end_src
** Floating-point arithmetic
#+ATTR_LATEX: :width .8\linewidth
file:images/polynome3.pdf
#+begin_src python :results output :exports both
def simple(x):
    return (x-1.)**9
# Easy! ;)
#+end_src
** Floating-point arithmetic
#+ATTR_LATEX: :width .8\linewidth
file:images/polynome3-4.pdf
\vspace{5cm}
** Floating-point arithmetic
#+ATTR_LATEX: :width .8\linewidth
file:images/polynome4.pdf
\vspace{5cm}

** Did I mention we have \textbf{parallel} machines nowadays?
#+BEGIN_EXPORT latex
\begin{overlayarea}{\linewidth}{7cm}\vspace{2mm}
  \begin{center}
    \includegraphics<+>[width=.9\linewidth, page=13]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=14]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=15]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=16]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=17]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=18]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=19]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=20]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=21]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=22]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=23]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=24]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=25]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=26]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=27]{pdf_sources/langlois.pdf}%
    \includegraphics<+>[width=.9\linewidth, page=28]{pdf_sources/langlois.pdf}%
    \only<+>{\vspace{-2mm}
      \begin{flushright}
        \includegraphics[height=4cm]{images/langlois_malpasset.png}\vspace{-3cm}
      \end{flushright}\vspace{-5mm}%\bigskip
      \begin{flushleft}
       \small \texttt{round}(\texttt{round}($a+b$)$+c$) $\ne$\newline \texttt{round}($a+\phantom{}$\texttt{round}$(b+c)$).
       
        These numerical issues can become \\ quite harmful in real use
        cases.
        \vspace{.5cm}
        
        \small TABLE 1.1: Reproducibility failure of the Malpasset test case
      \end{flushleft}\small
      \begin{tabular}{c|c|c|c}
        & The sequential run & a 64 procs run & a 128 procs run \\\hline
        depth H & 0.3500122E-01 & 0.2\alert{748817}E-01 & 0.\alert{1327634}E-01 \\\hline
        velocity U & 0.4029747E-02 & 0.4\alert{935279}E-02 & 0.4\alert{512116}E-02 \\\hline
        velocity V & 0.7570773E-02 & 0.\alert{3422730}E-02 & 0.75\alert{45233}E-02
      \end{tabular}}
  \end{center}
  \only<.>{
  {\bf \alert{Numerical reproducibility?}}: Approximations in the model, in
  the algorithm, in its implementation, in its execution. \medskip

  The whole chain needs to be revisited.}
\end{overlayarea}
\begin{flushright}\scriptsize Courtesy of P. Langlois and R. Nheili\end{flushright}
#+END_EXPORT

* Conclusion and Advertising
** Global Reproducibility Networks                                :noexport:
#+begin_center
\bf https://www.ukrn.org/global-networks/
#+end_center
#+latex: \includegraphics[width=\linewidth]{images/reproducibility-network/reproducibility_networks.png}%
** French Reproducibility Network                                 :noexport:
#+begin_center
\bf http://www.recherche-reproductible.fr/
#+end_center
#+latex: \includegraphics[width=\linewidth]{images/reproducibility-network/reproducibility_network_fr.png}%
** French Reproducibility Network Days: 1st Edition               :noexport:
***                                                                 :BMCOL:
:PROPERTIES:
:BEAMER_col: .53
:END:
*\bf March 2023, Institut Pasteur, Paris*

#+latex: \includegraphics[width=.5\linewidth]{images/reproducibility-network/rrdays1_logo_madics.png}%
#+latex: \includegraphics[width=.5\linewidth]{images/reproducibility-network/rrdays1_logo_pasteur.png}%

\bigskip

/Toward an *inter-disciplinary* look on our respective approaches and definitions/
- /Observational, experimental, statistical, computational, etc./

\medskip

*Identify volunteers*, possible *collaboration* topics, *diversity* of
concerns/practices, *educational resources*,...
*** affiche                                                         :BMCOL:
:PROPERTIES:
:BEAMER_col: .5
:END:
#+latex: \includegraphics[width=\linewidth]{images/reproducibility-network/rrdays1_affiche.pdf}%

** French Reproducibility Network Days: 2nd Edition               :noexport:
#+begin_center
  #+latex: \includegraphics[width=.9\linewidth]{images/reproducibility-network/rrdays2_affiche.png}
  #+latex: % \includegraphics[width=.6\linewidth]{images/reproducibility-network/rrdays2_logos.png}%

  \Large \bf _3rd Edition: March 3-4, 2025 @ Lyon_
#+end_center

** Good research requires time and resources
#+LaTeX: \begin{columns}\begin{column}[t]{.4\linewidth}\centering
\bf *Computation provenance: notebooks*
#+latex: \only<2>{\alert{and workflows}}

file:images/jupyterpreview.png

#+latex: \only<1>{
#+LaTeX: \includegraphics[height=.8cm]{images/logo/Jupyter_logo.png}
#+LaTeX: \includegraphics[height=.8cm]{images/logo/OrgMode_logo.png}
#+LaTeX: \includegraphics[height=.8cm]{images/logo/RStudio_logo.png}}%
#+LaTeX: \uncover<2>{
#+LaTeX: \rlap{\includegraphics[height=1cm]{images/logo/gnu-make.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/snakemake.png}}
# file:images/logo/workflows.png
#+LaTeX: }
#+LaTeX: \end{column}\begin{column}[t]{.35\linewidth}\centering
#+LaTeX: \uncover<2>{
\bf *Software environments*

file:images/python3-matplotlib.pdf 

#+LaTeX: \includegraphics[height=1cm]{images/logo/docker_logo.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/singularity_logo.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/Guix_logo.png}
#+LaTeX: }
#+LaTeX: \end{column}\begin{column}[t]{.35\linewidth}\centering
#+LaTeX: \uncover<2>{
\bf *Sharing and Archiving*\bigskip

#+LaTeX: \includegraphics[height=1cm]{images/logo/git_logo.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/github_logo.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/gitlab_logo.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/ArXiv-web.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/LogoHAL.png}
#+LaTeX: \includegraphics[height=1cm]{images/logo/Zenodo-logo.jpg}
#+LaTeX: \includegraphics[height=1cm]{images/logo/swh-logo.png}
#+LaTeX: }
#+LaTeX: \end{column}\end{columns}\bigskip

#+LaTeX: \begin{columns}\begin{column}[t]{.5\linewidth}
\small\alert{MOOC} [[https://learninglab.inria.fr/en/mooc-recherche-reproductible-principes-methodologiques-pour-une-science-transparente/][RR 1: Methodological]] [[https://learninglab.inria.fr/en/mooc-recherche-reproductible-principes-methodologiques-pour-une-science-transparente/][principles for a transparent science]]

\footnotesize *3rd Edition*: March 2020 -- _..._ (22,800+)
#+LaTeX: \end{column}\begin{column}[t]{.5\linewidth}\uncover<2>{
\small\alert{MOOC} [[https://www.fun-mooc.fr/en/courses/reproducible-research-ii-practices-and-tools-for-managing-comput/][RR 2: Practices and tools for]] [[https://www.fun-mooc.fr/en/courses/reproducible-research-ii-practices-and-tools-for-managing-comput/][managing computations and data]]

\footnotesize *1st Edition*: May 2024--Oct 2024
#+LaTeX: }
#+LaTeX: \end{column}\end{columns}
** MOOCs on Reproducible Research:                                :noexport:
#+latex: \begin{columns}\begin{column}[t]{.76\linewidth}
\alert{MOOC} [[https://learninglab.inria.fr/en/mooc-recherche-reproductible-principes-methodologiques-pour-une-science-transparente/][Reproducible Research: Methodological]] [[https://learninglab.inria.fr/en/mooc-recherche-reproductible-principes-methodologiques-pour-une-science-transparente/][principles for a transparent science]], Inria Learning Lab 
 - Konrad Hinsen, Christophe Pouzat
 - *3rd Edition*: March 2020 -- _..._ (16,800+)
 - Notebooks, version control, simple data formats
#+latex: \end{column}\begin{column}[t]{.15\linewidth}
  #+LaTeX: \begin{overlayarea}{\linewidth}{1cm}\null\hspace{-1.7cm}\includegraphics[width=2\linewidth,valign=t]{images/mooc_rr.png}\end{overlayarea}
#+latex: \end{column}\end{columns}\vspace{-.5em}\pause
\bigskip

*MOOC* [[https://www.fun-mooc.fr/en/courses/reproducible-research-ii-practices-and-tools-for-managing-comput/][Reproducible Research II: Practices and tools for managing]]
[[https://www.fun-mooc.fr/en/courses/reproducible-research-ii-practices-and-tools-for-managing-comput/][computations and data]]  (May-Sep 2024, $\approx$ 2,000)
- Managing data (=FITS/HDF5=, =git annex=)
- Software environment control (=docker=, =singularity=, =guix=)
- Scientific workflow (=make=, =snakemake=)
- +Statistics+, +Numerical Chaos+
* What's the point ? @@latex:\includegraphics[height=2.5cm]{./images/in_science_we_trust.jpg}@@
** The Elephant in the Room                                       :noexport:
#+latex: \hbox{\hspace{-1cm}\includegraphics[height=2.55cm]{images/climate/science_is_clear.png}%
#+latex: \includegraphics[height=2.55cm]{images/climate/climate_nasa_gov_effects.png}}

[[https://www.ipcc.ch/report/ar6/syr/][IPCC]], [[https://zenodo.org/record/3553579][IPBES]], [[https://climate.nasa.gov/][https://climate.nasa.gov/]]

1. Global climate change is \textbf{not} a future problem
2. It is \textbf{entirely} due to human activity \pause
3. /9 out of 10 IPCC scientists/ \newline
   /believe overshoot is likely/ \newline [[https://www.nature.com/articles/d41586-021-02990-w][Nature survey, Nov. 2021]]

   #+latex: \vspace{-1.8cm}\hbox{\hspace{6.1cm}\includegraphics[width=.55\linewidth]{images/climate/ipcc_nature_survey.png}}

   #+latex: \vspace{-.8cm}

*\bf "+Several+" scenarios on the table* \pause
  - What will CS look like/be used for in such a world?
  - Let's not confuse energy optimization/saving with sobriety
** The Elephant in the Room: Climate Change \hfill1/2
#+latex: \hbox{\hspace{-1cm}\includegraphics[height=2.55cm]{images/climate/science_is_clear.png}%
#+latex: \includegraphics[height=2.55cm]{images/climate/climate_nasa_gov_effects.png}}
\small\vspace{-1em}
[[https://www.ipcc.ch/report/ar6/syr/][IPCC]], [[https://zenodo.org/record/3553579][IPBES]], [[https://climate.nasa.gov/][https://climate.nasa.gov/]] \vspace{-1em}

#+ATTR_BEAMER: :overlay <+->
1. Global climate change is \textbf{not} a future problem\vspace{-.5em}
2. It is \textbf{entirely} due to human activity\vspace{-.5em}
3. /9 out of 10 IPCC scientists believe overshoot is likely/ 
   #+latex: \rlap{\footnotesize
   #+latex: }

#+BEGIN_EXPORT latex
\vspace{-2em}
\null\hspace{-.2cm}\hbox{
    \begin{overlayarea}{\linewidth}{5cm}
      \begin{center}
        \only<1>{\vspace{-2em}}%
        \includegraphics<1>[height=4cm]{images/climate/global_average_temperature_evolution.png}%
        \includegraphics<1>[height=4cm]{images/climate/alberta.png}%
        \hbox{\hspace{-1cm}\includegraphics<2>[width=.6\linewidth]{images/climate/GIEC-graphique_result.png}%
        \includegraphics<2>[width=.6\linewidth]{images/climate/GIEC-graphique-2_result.png}}%
        \includegraphics<3>[height=3.5cm]{images/climate/ipcc_nature_survey.png}
      \end{center}\vspace{-1.5em}
      \begin{flushright}
        \only<1>{\scriptsize \href{https://en.wikipedia.org/wiki/Global_temperature_record}{https://en.wikipedia.org/wiki/Global\_temperature\_record}\hfill}%
        \only<1>{\scriptsize \href{https://en.wikipedia.org/wiki/2023_Alberta_wildfires}{2023 Alberta wildfires} 
                             \href{https://lethbridgenewsnow.com/2023/05/23/alberta-forest-land-scorched-by-2023-wildfires-surpasses-one-million-hectares-mark/}{($>1$ Mha)}}
        \only<2>{\vspace{-2em}\scriptsize \href{https://en.wikipedia.org/wiki/Paris_Agreement}{Paris Agreement'15} $\sim$ Net Zero by 2050  \hfill \href{https://report.ipcc.ch/ar6syr/pdf/IPCC_AR6_SYR_SPM.pdf}{Latest IPCC report}}
        \only<3>{\vspace{-1.5em}\scriptsize \href{https://www.nature.com/articles/d41586-021-02990-w}{Nature survey, Nov. 2021}}
      \end{flushright}
    \end{overlayarea}
}
#+END_EXPORT

   #+latex: \vspace{-.8cm}
** The Elephant in the Room: Climate Change \hfill2/2
\vspace{-.5em}
\small 
- Put aside  biodiversity loss, pollution, freshwater, land system change\dots ::
#+BEGIN_EXPORT latex
\vspace{-1em}
\null\hbox{\hspace{-.5cm}%
\includegraphics[height=3.8cm]{images/climate/carbon_footprint_france2.png}%
\includegraphics[height=3.8cm]{images/climate/carbon_footprint_france_split.png}%
}
\vspace{-1cm}
\begin{flushright}
  \scriptsize \href{https://www.nosviesbascarbone.org/}{https://www.nosviesbascarbone.org/}%
\end{flushright}
\vspace{-.3cm}
#+END_EXPORT
\pause
  #+LaTeX: \null\hbox{\hspace{-.5cm}\begin{columns}\begin{column}[b]{.4\linewidth}\centering
  #+LaTeX:     \includegraphics[height=2.18cm]{images/climate/ecolos-pont-de-sully-extinction-rebellion.jpg}%
  #+LaTeX: \end{column}\hspace{-.5cm}\begin{column}[b]{.9\linewidth}
  #   - Éco-terroristes, islamo-gauchistes, décivilisation, ...
  *\bf\small\quad French government response* \scriptsize
  - /Verdissement de l'industrie: « pause » sur les normes environnementales/
  - /Loi de programmation militaire (+41%)/
  - [[https://www.ecologie.gouv.fr/trajectoire-rechauffement-reference-ouverture-consultation-publique][/Nous devons préparer la France à une élévation de la température de 4 °C/]]
  - Academia ? PEPR 5G, Cloud, NUMPEX, Quantique, IA, Agroécologie et numérique
  #+LaTeX: \end{column}\end{columns}}\pause
- +Several+ scenarios on the table ::  
  - Energy optimization/saving \ne sobriety and frugality
  - What will research/CS look like/be used for in such a world?
* Emacs Setup                                                      :noexport:
This document has local variables in its postembule, which should
allow Org-mode (9) to work seamlessly without any setup. If you're
uncomfortable using such variables, you can safely ignore them at
startup. Exporting may require that you copy them in your .emacs.

#+begin_src emacs-lisp 
(setq org-latex-tables-centered nil)
(setq org-latex-listings 'minted)
(setq org-latex-pdf-process '("lualatex -shell-escape -interaction nonstopmode -output-directory %o %f"))
#+end_src

#+RESULTS:
| lualatex -shell-escape -interaction nonstopmode -output-directory %o %f |

# Local Variables:
# eval: (setq org-latex-tables-centered nil)
# eval: (setq org-latex-listings 'minted)
# eval: (setq org-latex-pdf-process '("lualatex -shell-escape -interaction nonstopmode -output-directory %o %f"))
# End:
